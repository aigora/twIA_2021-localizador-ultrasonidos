#include <stdio.h>
//Este código supuestamente recoge las distancias de los 8 (Por ahora 7)sensores en un vector y las imprime en pantalla.
//No se si funciona asi que ya me direis.

void setup()
{   
  long i,j,k;
  long distancia[7]; //Para introducir las distancias de los 8 sensores, se almacenan en un vector de tamaño 8.
  Serial.begin(9600);
  for (i=0;i<=7;i++)
     {
      distancia[i]=0;  //Se inicializa el vector a 0.
     }
  for(j=0;j<=12;j=j+2)
     {
        pinMode(j, INPUT);//Se inicializan los pines pares como entrada(0,2,4,6,8,10,12)
     }
  for(k=1;k<=13;k=k+2)
     {
        pinMode(k, OUTPUT);  //Se inicializan los pines impares como salida(1,3,5,7,9,11,13)
     }
} //Sensor 1: Pines 0 y 1. Sensor 2: Pines 2 y 3. Sensor 3: Pines 4 y 5.
  //Sensor 4: Pines 6 y 7. Sensor 5: Pines 8 y 9. Sensor 6: Pines 10 y 11. Sensor 7: Pines 12 y 13. Sensor 8: Habria que usar pines analogicos.

void loop() {
    long distancia[7],control,i,j;
    for (i=0;i<=6;i++) //Por ahora desde el 0 al 6 porque no se qué hacer con el octavo,faltan pines digitales
    {
       control=2*i; //Para la funcion. Si i es,por ejemplo 4, a este sensor le corresponden los pines 8 y 9. Entonces multiplica 2*2 y obtiene el primer pin, y el otro lo consigue sumando 1.
       distancia[i] = readUltrasonicSensor(control);
    }
    for (j=0;j<=6;i++)
    {
      Serial.print(distancia[j]);
      Serial.print(" ");
    }
    Serial.print("\n");
    delay(3000);     //Le he puesto el delay a 3 segundos para que de tiempo a ver las distancias.
}

long readUltrasonicSensor(long control) {               
  long duracion; 
    digitalWrite(control+1, HIGH);             
    delayMicroseconds(10); //Envia pulso de 10 microsegundos.
    digitalWrite(control+1, LOW);   
    duracion = pulseIn(control, HIGH);
    return (duracion / 58);        
}
